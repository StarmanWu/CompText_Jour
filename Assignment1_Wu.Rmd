---
title: 'Assignment #1'
author: "Xingman Wu"
date: "2024-09-19"
output: html_document
---
--Load relevant software libraries
```{r}
#load libraries
library(quanteda)
library(tidytext)
library(tidyverse)
library(dplyr)
library(rio)
library(janitor)
```

--Load the data: https://github.com/wellsdata/CompText_Jour/blob/main/data/blackindex_master.csv
```{r}
#load the data
data <- read.csv('https://raw.githubusercontent.com/wellsdata/CompText_Jour/refs/heads/main/data/blackindex_master.csv')
# Raw data was imported here.
```

--Using code, describe the number of rows and columns in the dataset
```{r}
# describe the number of rows and columns in the dataset
nrow(data) # 1803 rows
ncol(data) # 30 columns
```

--Create a table that displays a count of the top 5 newspaper_city entries
```{r}
data %>% 
  select(newspaper_city) %>% 
  filter(!is.na(newspaper_city))%>% 
  group_by(newspaper_city) %>% 
  summarize(count = n()) %>% 
  arrange(desc(count)) %>%
  slice_head(n = 5)
# The top 5 newspaper_city entries are Pittsburgh, Chicago, Atlanta, Norfolk, and New York.

```

--Create a table that counts the different entries in the "newspaper_city" column
```{r}
# We can do it in this way
citytable <- table(data$newspaper_city)
citytable 

# Alternatively, 
data %>% 
  select(newspaper_city) %>% 
  filter(!is.na(newspaper_city))%>% 
  group_by(newspaper_city) %>% 
  summarize(count = n()) %>% 
  arrange(desc(count))

# both can work
```
--Create a table that counts all newspaper_city entries by year. UPDATE: Filter out the NA values
```{r}
data %>% 
  select(newspaper_city, year) %>% 
  filter(!is.na(newspaper_city) & !is.na(year))%>% 
  group_by(year,newspaper_city) %>% 
  summarize(count = n()) %>% 
  arrange(newspaper_city, desc(count))

```

--Create a simple column ggplot chart that shows the total entries by year
```{r}
yeartable<- data %>% 
  select(year) %>% 
  filter(!is.na(year))%>% 
  group_by(year) %>% 
  summarize(count = n())
head(yeartable)


#Create chart of years
ggplot(yeartable,aes(x = year, y = count,
             fill = count)) +
  geom_col(position = "dodge") + 
  theme(legend.position = "none") +
  labs(title = "The total entries by year",
       caption = "Graphic by Xingman Wu, 9-20-2024",
       y="Count",
       x="Year")

```

Armed with your data analysis, write a 250 word memo at the end of the R markdown document that summarizes your findings. 
Use this opportunity to ask questions or note any major flaws in the data.

The dataset contains 1,803 observations (rows) and 30 variables (columns). One of the primary issues is the large number of missing values in the "Newspaper City" column, with 1,089 entries listed as NA. Despite this, among the remaining non-missing values, the most frequent entries include Pittsburgh (151), Chicago (147), Atlanta (122), Norfolk (96), and New York (71). Other cities, such as Los Angeles and St. Louis, are also represented in the dataset but with much lower counts, both having only two entries. The dataset mainly spans the period between 1900 and 1950, with fewer observations occurring before 1900 or after 1950. However, the substantial amount of missing data poses a significant challenge. The missing values in "Newspaper City" weaken the datasetâ€™s completeness and, as a result, the conclusions drawn from this data are not reliable and can be easily overturned.




